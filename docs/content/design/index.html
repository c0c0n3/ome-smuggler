<!DOCTYPE html>
<!--
 * Adapted from: https://github.com/c0c0n3/c0c0n3.github.io/blob/master/index.html
 * (commit: https://github.com/c0c0n3/c0c0n3.github.io/commit/7bc099eb27309ee19b9bff5b8fcd0fc2985f3623) 
-->
<html lang="en">
<head>
  <title>Design</title>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" type="text/css" href="http://necolas.github.io/normalize.css/latest/normalize.css" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Alegreya" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Kaushan+Script" />
  <link rel="stylesheet" type="text/css" href="../../css/style.css" />
  <link rel="stylesheet" type="text/css" href="../../css/zenburn-highlighter.css" />
  
</head>

<body>

<nav>
  <ul>
    <li><em>smuggler</em></li>
    <li><a href="../../content/index.html">home</a></li>
    <li><a href="https://github.com/c0c0n3/ome-smuggler">github</a></li>
    <li><a href="../../content/navigation.svg">site navigation</a></li>
  </ul>
</nav>

<header>
  <section id="header">
    <h1 id="title">Design</h1>

    <p id="slogan">doodles and giggles</p>

  </section>
</header>

<main>
  <section id="content">
  <p class="intro">
So here’s our <em>Hitch-Hacker Guide to the Code</em>. Even though the answer to life, the universe and everything has already been “<a href="https://en.wikipedia.org/wiki/42_(number)#The_Hitchhiker.27s_Guide_to_the_Galaxy" title="The Answer to the Ultimate Question of Life, the Universe, and Everything">calculated</a>”, you may still have a lot of questions about Smuggler’s design. Then you might find some of the answers here…
</p>
<p>High on our list of suggested places to visit is the breezy peak of <a href="high-level/index.html" title="High-level View">High-level View</a>. From up there, it should be easy to see all of Smuggler’s components at once and take away a conceptual model of what Smuggler does behind the scenes. There you’ll also find a road map for the source code complete with dependencies and modularity signposts. On the way down from high-level, you should swing by <a href="messaging/index.html" title="Messaging">Messaging</a> place where you can get a feel of the ideas behind messaging in Smuggler as well as the details of the design. After that, we suggest hiking to <a href="high-level/process-view.html" title="Process View">Process View</a> as from there you can see Smuggler’s dynamics: processes, threads, and all that jazz.</p>
<div class="pull-quote">
<h6 id="security">Security</h6>
<p>Hey, you have said nothing about security; also looking at the code, there seems to be nothing in place?! <em>Guilty as charged</em>. At the moment Smuggler only runs in a secure, highly-trusted computing environment; that is why we’re getting away with murder. But soon we’ll have to put some <em>serious</em> thought into security if we want to make Smuggler part of the OMERO family.</p>
</div>
<p>Now before you read about Smuggler’s design and check out the code, you should have a look at the next section on technology. (In most of the docs we take for granted you’re familiar with the components of our tech stack.) One last thing: on the way back from your trip in design land, it may be worth stopping again here to read the <a href="#perspective">last section</a> to understand the reasons behind the design and to put it into perspective.</p>
<h2 id="technology-stack">Technology Stack</h2>
<p>The bad news: Smuggler relies on lots of frameworks—<a href="https://spring.io/" title="Spring Home">Spring</a> and its offspring (love puns!) <a href="http://projects.spring.io/spring-boot/" title="Spring Boot Home">Spring Boot</a>, <a href="http://hornetq.jboss.org/" title="HornetQ Home">HornetQ</a>, and <a href="http://undertow.io/" title="Undertow Home">Undertow</a>. The good news: its <code>core</code> package, where most of the functionality sits, has no dependencies on any of them. So we have the good and the bad, what about the ugly? <code>core</code> relies heavily on Java 8 and the new Streams API.</p>
<p class="side-note">
Java, having become the bastion of <a href="http://typicalprogrammer.com/abject-oriented/" title="Introduction to Abject-Oriented Programming">abject-orientation</a>, is now also poised to be the sanctuary of dysfunctional programming. But in a twist of fate, Spring came along to simplify Java development! <em>Ouch</em>. But in a twist of fate, Spring Boot came along to simplify Spring development! <em>Ouch</em>. (I suspect we’ve bumped into a case of non-terminating recursion…)
</p>
<p>As we’re at it, we should also mention the testing frameworks we use. From unit to integration to end to end testing, our tech sauce is becoming creamier by the minute: <a href="http://junit.org/" title="JUnit Home">JUnit</a> (with theories), <a href="http://hamcrest.org/" title="Hamcrest Home">Hamcrest</a>, <a href="http://mockito.org/" title="Mockito Home">Mockito</a>, and all the Spring testing goodies such as Mock MVC.</p>
<p>Before we dive deep into the design and the source, a word of caution: the tech sauce is quite heavy to digest so it may be too much to gulp down in just one go if you’re not already pretty familiar with the various frameworks we use. (It proved definitely too much for me, I tell you my tummy wasn’t a happy camper for days afterwards!) In that case, it’s probably best to take it slowly and skill up a bit before hand (as I did myself!), especially on Java 8 (dys-)functional programming and Streams API.</p>
<div class="side-note">
<h6 id="springdoh">Spring…D’oh!</h6>
<p>Before starting developing Smuggler, we built a prototype app to learn about and experiment with the various (many!) bits and pieces that make up our current technology stack. Aptly named “Spring…D’oh”, this initial prototype has basically no app logic but pretty much the same architecture and exactly the same technology stack as Smuggler; we actually used its source base as a blueprint for Smuggler’s. If you’re not familiar with Java 8, Spring, Messaging, and all the other techs in Smuggler, “Spring…D’oh” may be a good starting point to get to grips with all this madness as it should be easier to see how the pieces of the puzzle all fall into place. At least it helped me… You can find the <a href="https://github.com/c0c0n3/spring-doh" title="Spring D'oh Project on GitHub">project on GitHub</a>.</p>
</div>
<h2 id="perspective">Perspective</h2>
<p>What kind of sick mind does it take to come up with a whole Web app to run an OMERO import outside of a user session when a <code>cron</code> job and an OMERO script could have been (<em>almost</em>) enough? Ya, but hold your fire. (Well, at least until I get out of the way!) Thing is, we’re planning to use Smuggler for a whole bunch of tasks where a message-based architecture seems a good fit.</p>
<p class="pull-quote">
Smuggler is in a sense an exploration of a <a href="http://www.reactivemanifesto.org/" title="Reactive Manifesto">reactive systems</a> architecture in the context of the OMERO ecosystem and integration of heterogeneous software. Ours is just <em>one</em> architecture, others are possible too and eventually we may give them a shot.
</p>
<p>To find out more about our plans, have a quick read through the <a href="../../content/use-cases/index.html" title="Condensed Use Cases">Condensed Use Cases</a>. We think the functionality we’re planning to add sort of justifies the kind of architecture we put in place, but this is obviously up for debate…</p>
  </section>
</main>  

<footer>
  <section id="footer">
    <p>
      <a href="../../content/index.html">home</a> • 
      <a href="https://github.com/c0c0n3/ome-smuggler">github</a> • 
      <a href="../../content/navigation.svg">site navigation</a>
    </p>
    <p>generated with <a href="https://jaspervdj.be/hakyll/">Hakyll</a> •  
      <a href="https://github.com/c0c0n3/ome-smuggler/tree/gh-pages">source code</a>
    </p> 
    <!-- TODO fonts; legal? -->
  </section>
</footer>
  
</body>
</html>
