<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>SpringBootAppPropsFile.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</a> &gt; <a href="../../index.html" class="el_group">ome-smuggler</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">ome.smuggler.config.data</a> &gt; <span class="el_source">SpringBootAppPropsFile.java</span></div><h1>SpringBootAppPropsFile.java</h1><pre class="source lang-java linenums">package ome.smuggler.config.data;

import static ome.smuggler.config.items.SpringBootConfigProps.*;
import static ome.smuggler.config.items.SpringBootAdminConfigProps.*;

import java.net.URI;
import java.net.URISyntaxException;
import java.util.Properties;
import java.util.stream.Stream;

import util.config.ConfigProvider;
import util.config.props.JProps;
import ome.smuggler.config.items.LogLevel;


/**
 * The data that goes into 'config/application*.properties'.
 */
<span class="nc" id="L19">public class SpringBootAppPropsFile </span>
    implements ConfigProvider&lt;Properties&gt; {

    @Override
    public Stream&lt;Properties&gt; readConfig() throws Exception {
<span class="nc" id="L24">        String appName = &quot;OME.Smuggler&quot;;</span>
<span class="nc" id="L25">        JProps cfg = new JProps(new Properties()); </span>
        
<span class="nc" id="L27">        cfg.set(appName().with(appName));</span>
        
<span class="nc" id="L29">        cfg.set(logFilePathName().with(&quot;ome-smuggler.log&quot;));</span>
<span class="nc" id="L30">        cfg.set(rootLogLevel().with(LogLevel.INFO));</span>
        
<span class="nc" id="L32">        cfg.setAll(endpointsEnabled(), true);</span>
<span class="nc" id="L33">        cfg.setAll(endpointsSensitive(), false);</span>
        
<span class="nc" id="L35">        cfg.set(jmxDomain().with(appName));</span>
<span class="nc" id="L36">        cfg.set(jmxEnabled().with(true));</span>
<span class="nc" id="L37">        cfg.set(jmxUniqueNames().with(true));</span>
        
<span class="nc" id="L39">        cfg.set(adminServerUrl().with(buildAdminUrl()));</span>
        
<span class="nc" id="L41">        return Stream.of(cfg.getProps());</span>
    }
    
    private URI buildAdminUrl() throws URISyntaxException {
<span class="nc" id="L45">        int port = </span>
<span class="nc" id="L46">                new UndertowYmlFile().readConfig().findFirst().get().getPort();</span>
        
<span class="nc" id="L48">        return new URI(&quot;http&quot;, null, &quot;localhost&quot;, port + 1, null, null, null);</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</div></body></html>