<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>AbstractWrapper.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</a> &gt; <a href="../../index.html" class="el_group">ome-smuggler</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">util.object</a> &gt; <span class="el_source">AbstractWrapper.java</span></div><h1>AbstractWrapper.java</h1><pre class="source lang-java linenums">package util.object;

import java.util.Objects;
import java.util.function.Supplier;

/**
 * A {@link Supplier} to wrap a value in such a way that the wrapper behaves 
 * just like the wrapped value in terms of {@link #equals(Object) equality}, 
 * {@link #hashCode() hashing}, and {@link #toString() string conversion}.
 */
<span class="fc" id="L11">public abstract class AbstractWrapper&lt;T&gt; implements Supplier&lt;T&gt; {</span>

    /**
     * Implements the equivalence obtained by identifying wrappers with wrapped
     * values.
     * More precisely, call {@code U} the set obtained by the union of all 
     * {@code T} values ({@code null} included) with their corresponding 
     * wrappers {@code W = { AbstractWrapper(t) | t in T } and consider the 
     * function {@code f : U â†’ T} defined by {@code f t = t} if {@code t in T}
     * or {@code f w = w.get()} if {@code w in W}. The equivalence enforced
     * by this method is the equivalence kernel of {@code f}.
     */
    @Override 
    public boolean equals(Object other) {
<span class="fc bfc" id="L25" title="All 2 branches covered.">        if (this == other) return true;</span>
        
<span class="fc" id="L27">        T wrappedValue = get();</span>
<span class="fc bfc" id="L28" title="All 2 branches covered.">        if (other instanceof AbstractWrapper) {  // NB (null instanceOf ..) == false</span>
<span class="fc" id="L29">            AbstractWrapper&lt;?&gt; otherWrapper = (AbstractWrapper&lt;?&gt;) other;</span>
<span class="fc" id="L30">            return Objects.equals(wrappedValue, otherWrapper.get());</span>
        }
<span class="fc bfc" id="L32" title="All 2 branches covered.">        if (wrappedValue != null) {</span>
<span class="fc" id="L33">            return wrappedValue.equals(other);</span>
        }
<span class="fc bfc" id="L35" title="All 2 branches covered.">        return other == null;</span>
    }
    
    /**
     * Implemented by delegating to the wrapped value except when {@code null},
     * in which case {@code 0} is returned.
     */
    @Override 
    public int hashCode() {
<span class="fc" id="L44">        T wrappedValue = get();</span>
<span class="fc bfc" id="L45" title="All 2 branches covered.">        return wrappedValue == null ? 0 : wrappedValue.hashCode();</span>
    }
    
    /**
     * Implemented by delegating to the wrapped value except when {@code null},
     * in which case the string &quot;null&quot; is returned.
     */
    @Override
    public String toString() {
<span class="fc" id="L54">        T wrappedValue = get();</span>
<span class="fc" id="L55">        return String.valueOf(wrappedValue);  // caters for null</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</div></body></html>