<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ImportInput.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</a> &gt; <a href="../../index.html" class="el_group">ome-smuggler</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">ome.smuggler.core.types</a> &gt; <span class="el_source">ImportInput.java</span></div><h1>ImportInput.java</h1><pre class="source lang-java linenums">package ome.smuggler.core.types;

import static java.util.Objects.requireNonNull;
import static util.sequence.Arrayz.hasNulls;
import static util.string.Strings.requireString;

import java.net.URI;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import java.util.stream.Stream;


/**
 * Details what an import task must do.
 */
public class ImportInput {

    private final Email experimenterEmail;
    private final URI target;
    private final URI omero;
    private final String sessionKey;
    private Optional&lt;String&gt; name;
    private Optional&lt;String&gt; description;    
    private Optional&lt;DatasetId&gt; datasetId;
    private Optional&lt;ScreenId&gt; screenId;
    private List&lt;TextAnnotation&gt; textAnnotations;
    private List&lt;PositiveN&gt; annotationIds;
<span class="fc" id="L31"></span>
    public ImportInput(Email experimenterEmail, URI target, URI omero, 
<span class="fc" id="L33">                       String sessionKey) {</span>
<span class="fc" id="L34">        requireNonNull(experimenterEmail, &quot;experimenterEmail&quot;);</span>
<span class="fc" id="L35">        requireNonNull(target, &quot;target&quot;);</span>
<span class="fc" id="L36">        requireNonNull(omero, &quot;omero&quot;);</span>
        requireString(sessionKey, &quot;sessionKey&quot;);
<span class="fc" id="L38">        </span>
<span class="fc" id="L39">        this.experimenterEmail = experimenterEmail;</span>
<span class="fc" id="L40">        this.target = target;</span>
<span class="fc" id="L41">        this.omero = omero;</span>
<span class="fc" id="L42">        this.sessionKey = sessionKey;</span>
<span class="fc" id="L43">        name = Optional.empty();</span>
<span class="fc" id="L44">        description = Optional.empty();</span>
<span class="fc" id="L45">        datasetId = Optional.empty();</span>
<span class="fc" id="L46">        screenId = Optional.empty();</span>
<span class="fc" id="L47">        textAnnotations = new ArrayList&lt;&gt;();</span>
        annotationIds = new ArrayList&lt;&gt;();
    }
<span class="fc" id="L50"></span>
    public Email getExperimenterEmail() {
        return experimenterEmail;
    }
<span class="fc" id="L54"></span>
    public URI getTarget() {
        return target;
    }
<span class="fc" id="L58"></span>
    public URI getOmeroHost() {
        return omero;
    }
<span class="fc" id="L62"></span>
    public String getSessionKey() {
        return sessionKey;
    }
<span class="fc" id="L66">    </span>
    public Optional&lt;String&gt; getName() {
        return name;
    }
<span class="fc" id="L70"></span>
<span class="fc" id="L71">    public ImportInput setName(String n) {</span>
        this.name = Optional.ofNullable(n);
        return this;
    }
<span class="fc" id="L75"></span>
    public Optional&lt;String&gt; getDescription() {
        return description;
    }
<span class="fc" id="L79"></span>
<span class="fc" id="L80">    public ImportInput setDescription(String d) {</span>
        this.description = Optional.ofNullable(d);
        return this;
    }
<span class="fc" id="L84">    </span>
    public Optional&lt;DatasetId&gt; getDatasetId() {
        return datasetId;
    }
<span class="fc" id="L88">    </span>
<span class="fc" id="L89">    public ImportInput setDatasetId(PositiveN id) {</span>
<span class="fc" id="L90">        requireNonNull(id, &quot;id&quot;);</span>
        datasetId = Optional.of(new DatasetId(id.get()));
        screenId = Optional.empty();
        return this;
<span class="fc" id="L94">    }</span>
<span class="fc" id="L95">    </span>
<span class="fc" id="L96">    public ImportInput setDatasetId(Optional&lt;DatasetId&gt; id) {</span>
        requireNonNull(id, &quot;id&quot;);
        id.ifPresent(x -&gt; setDatasetId(x));
        return this;
<span class="fc" id="L100">    }</span>
    
    public boolean hasDatasetId() {
        return datasetId.isPresent();
<span class="fc" id="L104">    }</span>
<span class="fc" id="L105">    </span>
<span class="fc" id="L106">    public Optional&lt;ScreenId&gt; getScreenId() {</span>
        return screenId;
    }
    
<span class="fc" id="L110">    public ImportInput setScreenId(PositiveN id) {</span>
<span class="fc" id="L111">        requireNonNull(id, &quot;id&quot;);</span>
        screenId = Optional.of(new ScreenId(id.get()));
<span class="fc" id="L113">        datasetId = Optional.empty();</span>
        return this;
    }

<span class="fc" id="L117">    public ImportInput setScreenId(Optional&lt;ScreenId&gt; id) {</span>
        requireNonNull(id, &quot;id&quot;);
        id.ifPresent(x -&gt; setScreenId(x));
        
<span class="fc bfc" id="L121" title="All 4 branches covered.">        return this;</span>
<span class="fc" id="L122">    }</span>
    
<span class="fc bfc" id="L124" title="All 2 branches covered.">    public boolean hasScreenId() {</span>
<span class="fc" id="L125">        return screenId.isPresent();</span>
    }
<span class="fc bfc" id="L127" title="All 2 branches covered.">    </span>
<span class="fc" id="L128">    public ImportInput addTextAnnotation(TextAnnotation...xs) {</span>
        if (xs == null || hasNulls(xs)) {  // zero len is okay tho
            throw new NullPointerException();
<span class="fc" id="L131">        }</span>
        if (xs.length == 1) {
            textAnnotations.add(xs[0]);
        }
<span class="fc" id="L135">        if (xs.length &gt; 1) {</span>
<span class="fc" id="L136">            textAnnotations.addAll(Arrays.asList(xs));</span>
        }
<span class="fc" id="L138">        </span>
        return this;
    }
    
<span class="fc bfc" id="L142" title="All 4 branches covered.">    public ImportInput addTextAnnotations(Stream&lt;TextAnnotation&gt; xs) {</span>
<span class="fc" id="L143">        requireNonNull(xs, &quot;xs&quot;);</span>
        xs.forEach(x -&gt; addTextAnnotation(x));
<span class="fc bfc" id="L145" title="All 2 branches covered.">        </span>
<span class="fc" id="L146">        return this;</span>
    }
<span class="fc bfc" id="L148" title="All 2 branches covered.">    </span>
<span class="fc" id="L149">    public ImportInput addAnnotationId(PositiveN...xs) {</span>
        if (xs == null || hasNulls(xs)) {  // zero len is okay tho
            throw new NullPointerException();
<span class="fc" id="L152">        }</span>
        if (xs.length == 1) {
            annotationIds.add(xs[0]);
        }
<span class="fc" id="L156">        if (xs.length &gt; 1) {</span>
<span class="fc" id="L157">            annotationIds.addAll(Arrays.asList(xs));</span>
        }
<span class="fc" id="L159">        </span>
        return this;
    }
    
<span class="fc" id="L163">    public ImportInput addAnnotationIds(Stream&lt;PositiveN&gt; xs) {</span>
        requireNonNull(xs, &quot;xs&quot;);
        xs.forEach(x -&gt; addAnnotationId(x));
        
<span class="fc" id="L167">        return this;</span>
    }
    
    public Stream&lt;TextAnnotation&gt; getTextAnnotations() {
        return textAnnotations.stream();
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">    }</span>
<span class="nc" id="L173">    </span>
    public Stream&lt;PositiveN&gt; getAnnotationIds() {
<span class="pc bpc" id="L175" title="1 of 2 branches missed.">        return annotationIds.stream();</span>
<span class="fc" id="L176">    }</span>
<span class="pc bpc" id="L177" title="1 of 2 branches missed.">    </span>
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">    @Override</span>
<span class="pc bpc" id="L179" title="1 of 2 branches missed.">    public boolean equals(Object x) {</span>
<span class="pc bpc" id="L180" title="1 of 2 branches missed.">        if (this == x) {</span>
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">            return true;</span>
<span class="pc bpc" id="L182" title="1 of 2 branches missed.">        }</span>
<span class="pc bpc" id="L183" title="1 of 2 branches missed.">        if (x instanceof ImportInput) {</span>
<span class="pc bpc" id="L184" title="1 of 2 branches missed.">            ImportInput other = (ImportInput) x;</span>
<span class="pc bpc" id="L185" title="1 of 2 branches missed.">            return Objects.equals(experimenterEmail, other.experimenterEmail)</span>
                &amp;&amp; Objects.equals(target, other.target)
<span class="nc" id="L187">                &amp;&amp; Objects.equals(omero, other.omero)</span>
                &amp;&amp; Objects.equals(sessionKey, other.sessionKey)
                &amp;&amp; Objects.equals(name, other.name)
                &amp;&amp; Objects.equals(description, other.description)
                &amp;&amp; Objects.equals(datasetId, other.datasetId)
<span class="nc" id="L192">                &amp;&amp; Objects.equals(screenId, other.screenId)</span>
<span class="nc" id="L193">                &amp;&amp; Objects.equals(textAnnotations, other.textAnnotations)</span>
<span class="nc" id="L194">                &amp;&amp; Objects.equals(annotationIds, other.annotationIds);</span>
        }
        return false;
    }
    
    @Override
    public int hashCode() {
        return Objects.hash(experimenterEmail, target, omero, sessionKey,
                            name, description, datasetId, screenId, 
                            textAnnotations, annotationIds);
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</div></body></html>