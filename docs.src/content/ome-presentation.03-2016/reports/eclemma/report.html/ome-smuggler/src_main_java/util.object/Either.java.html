<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>Either.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</a> &gt; <a href="../../index.html" class="el_group">ome-smuggler</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">util.object</a> &gt; <span class="el_source">Either.java</span></div><h1>Either.java</h1><pre class="source lang-java linenums">package util.object;

import static java.util.Objects.requireNonNull;

import java.util.function.Function;

/**
 * Holds either a value of type {@code L}, referred to as the &quot;left value&quot;, or a 
 * value of type {@code R}, referred to as the &quot;right value&quot;.
 * Often used in situations where the outcome of a computation can either be 
 * some value {@code R} (the right, correct value) or some other value {@code L}
 * indicating an error condition. 
 * &lt;p&gt;
 * NOTE. Most of this class is based on the core Haskell API for the Either 
 * data type.
 * &lt;/p&gt;
 */
public class Either&lt;L, R&gt; {

    /**
     * Creates a new holder for a left value.
     * @param leftValue the value to hold, may be {@code null}.
     * @return a left value holder.
     */
    public static &lt;L, R&gt; Either&lt;L, R&gt; left(L leftValue) {
<span class="fc" id="L26">        return new Either&lt;&gt;(leftValue, true, null);</span>
    }
    
    /**
     * Creates a new holder for a right value.
     * @param rightValue the value to hold, may be {@code null}.
     * @return a right value holder.
     */
    public static &lt;L, R&gt; Either&lt;L, R&gt; right(R rightValue) {
<span class="fc" id="L35">        return new Either&lt;&gt;(null, false, rightValue);</span>
    }
    
    private final L maybeLeft;
    private final R maybeRight;
    private final boolean isLeftValue;
    
<span class="fc" id="L42">    private Either(L leftValue, boolean isLeft, R rightValue) {</span>
<span class="fc" id="L43">        maybeLeft = leftValue;</span>
<span class="fc" id="L44">        maybeRight = rightValue;</span>
<span class="fc" id="L45">        this.isLeftValue = isLeft;</span>
<span class="fc" id="L46">    }</span>
    
    /**
     * Is this a left value holder?
     * @return {@code true} for yes, {@code false} for no.
     */
    public boolean isLeft() {
<span class="fc" id="L53">        return isLeftValue;</span>
    }
    
    /**
     * Is this a right value holder?
     * @return {@code true} for yes, {@code false} for no.
     */
    public boolean isRight() {
<span class="fc bfc" id="L61" title="All 2 branches covered.">        return !isLeftValue;</span>
    }
    
    /**
     * Returns the left value if this is a {@link #isLeft() left} value holder;
     * {@code null} will be merciless returned if this is instead a {@link 
     * #isRight() right} value holder;
     * @return the left value.
     */
    public L getLeft() {
<span class="fc" id="L71">        return maybeLeft;</span>
    }
    
    /**
     * Returns the right value if this is a {@link  #isRight() right} value 
     * holder; {@code null} will be merciless returned if this is instead a  
     * {@link #isLeft() left} value holder;
     * @return the right value.
     */
    public R getRight() {
<span class="fc" id="L81">        return maybeRight;</span>
    }
    
    /**
     * Applies the given transformation to the right value if this is a {@link  
     * #isRight() right} value holder to produce a new {@link #isRight() right} 
     * value holder to store the result of the transformation.
     * Does nothing if this is a {@link #isLeft() left} value holder, just 
     * returning a new left value holder containing this left value; this way a 
     * left value is propagated as is through map calls.
     * @param f the transformation to apply to the right value.
     * @return a new right value holder with the mapped value if this is a
     * right value holder; otherwise a new left value holder with this object's
     * left value.
     * @throws NullPointerException if this is a right value holder and the
     * argument is {@code null}.
     */
    public &lt;T&gt; Either&lt;L, T&gt; map(Function&lt;R, T&gt; f) {
<span class="fc bfc" id="L99" title="All 2 branches covered.">        if (isRight()) {</span>
<span class="fc" id="L100">            requireNonNull(f, &quot;f&quot;);</span>
            
<span class="fc" id="L102">            T mappedValue = f.apply(maybeRight);</span>
<span class="fc" id="L103">            return right(mappedValue);</span>
        }
<span class="fc" id="L105">        return left(maybeLeft);</span>
    }
    
    /**
     * Same as {@link #map(Function) map} but on left values.
     */
    public &lt;T&gt; Either&lt;T, R&gt; mapLeft(Function&lt;L, T&gt; f) {
<span class="fc bfc" id="L112" title="All 2 branches covered.">        if (isLeft()) {</span>
<span class="fc" id="L113">            requireNonNull(f, &quot;f&quot;);</span>
            
<span class="fc" id="L115">            T mappedValue = f.apply(maybeLeft);</span>
<span class="fc" id="L116">            return left(mappedValue);</span>
        }
<span class="fc" id="L118">        return right(maybeRight);</span>
    }
    
    /**
     * Applies the given transformation to the to the right value if this is a 
     * {@link #isRight() right} value holder to produce a new value holder.
     * Does nothing if this is a {@link #isLeft() left} value holder, just 
     * returning a new left value holder containing this left value; this way a 
     * left value is propagated as is through map calls. 
     * @param f the new value holder producer to apply to the right value.
     * @return the result of applying {@code f} to the right value if this
     * is a right value holder; otherwise a new left value holder with this 
     * object's left value.
     * @throws NullPointerException if this is a right value holder and the
     * argument is {@code null}.
     */
    public &lt;T&gt; Either&lt;L, T&gt; bind(Function&lt;R, Either&lt;L, T&gt;&gt; f) {
<span class="fc bfc" id="L135" title="All 2 branches covered.">        if (isRight()) {</span>
<span class="fc" id="L136">            requireNonNull(f, &quot;f&quot;);</span>
            
<span class="fc" id="L138">            return f.apply(maybeRight);</span>
        }
<span class="fc" id="L140">        return left(maybeLeft);</span>
    }
    
    /**
     * Applies {@code left} to the left value if this is a {@link #isLeft() 
     * left} value holder; otherwise applies {@code right} to the right value. 
     * @param left the transformation to apply to the left value.
     * @param right the transformation to apply to the right value.
     * @return the result of applying either transformation.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public &lt;T&gt; T either(Function&lt;L, T&gt; left, Function&lt;R, T&gt; right) {
<span class="fc" id="L152">        requireNonNull(left, &quot;left&quot;);</span>
<span class="fc" id="L153">        requireNonNull(right, &quot;right&quot;);</span>
        
<span class="fc bfc" id="L155" title="All 2 branches covered.">        if (isLeftValue) {</span>
<span class="fc" id="L156">            return left.apply(maybeLeft);</span>
        }
        else {
<span class="fc" id="L159">            return right.apply(maybeRight);</span>
        }
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</div></body></html>