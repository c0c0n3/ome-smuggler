<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ImportConfig.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</a> &gt; <a href="../../index.html" class="el_group">ome-smuggler</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">ome.smuggler.config.items</a> &gt; <span class="el_source">ImportConfig.java</span></div><h1>ImportConfig.java</h1><pre class="source lang-java linenums">package ome.smuggler.config.items;

import java.util.Arrays;
import java.util.Objects;

/**
 * Specifies how to configure import logs.
 * The available settings:
 * &lt;ul&gt;
 *  &lt;li&gt;{@link #setImportLogDir(String) Log directory path}.
 *  Path to the directory where all import logs will be kept. Directories in the
 *  path will be created if needed. 
 *  &lt;/li&gt;
 *  &lt;li&gt;{@link #setLogRetentionMinutes(Long) Log file retention period}.
 *  How long to keep an import run's log around after the import has completed.
 *  Past the specified amount of minutes, the file will be deleted.
 *  &lt;/li&gt;
 *  &lt;li&gt;{@link #setRetryIntervals(Long[]) Retry intervals}.
 *  How many times and at which intervals to retry a failed import.
 *  If an import fails, it will be retried after the number of minutes given in
 *  the first slot of this array; if the retry fails, it will be attempted again
 *  after the number of minutes given in the second slot of this array; and so
 *  on until the import succeeds or the last slot is used. So a failed import
 *  will be retried at most a number of times equal to the length of this array;
 *  if the array is {@code null} or empty, no retries will ever be attempted.
 *  &lt;/li&gt;
 *  &lt;li&gt;{@link #setFailedImportLogDir(String) Failed log directory path}.
 *  Path to the directory where to copy the log files of failed imports. 
 *  Directories in the path will be created if needed. 
 *  Note that the original file will still be available in the {@link 
 *  #getImportLogDir() log directory} but will be removed past the {@link 
 *  #getLogRetentionMinutes() retention period}. However, its copy in the 
 *  failed log directory will be kept indefinitely, the system administrator 
 *  will have to explicitly delete it after resolving the issue that caused 
 *  the failure.
 *  &lt;/li&gt;
 *  &lt;li&gt;{@link #setKeepAliveInterval(Long) Session keep alive interval}.
 *  Interval, in minutes, at which to refresh the OMERO session of a queued 
 *  import. Even though the client that requested the import established already 
 *  an import session with OMERO, the import request may sit in the queue for
 *  a period of time longer than the OMERO session timeout; hence a session
 *  a keep-alive is needed to avoid the session expiring before the import
 *  request is fetched from the queue and run. 
 *  This interval should be a few minutes less than the session timeout
 *  of the OMERO server and defaults to 5 minutes if not specified. (This is
 *  because the OMERO default session timeout is 10 minutes.)
 *  &lt;/li&gt;
 * &lt;/ul&gt;
 */
<span class="fc" id="L50">public class ImportConfig {</span>
    /* NB this has to be a Java Bean (i.e. getters/setters, no args ctor) to
     * be (de-)serialized painlessly by SnakeYaml.  
     */ 

    private String importLogDir;
    private Long logRetentionMinutes;
    private Long[] retryIntervals;
    private String failedImportLogDir;
    private Long keepAliveInterval;
    
    public String getImportLogDir() {
<span class="fc" id="L62">        return importLogDir;</span>
    }
    
    public void setImportLogDir(String importLogDir) {
<span class="fc" id="L66">        this.importLogDir = importLogDir;</span>
<span class="fc" id="L67">    }</span>

    public Long getLogRetentionMinutes() {
<span class="fc" id="L70">        return logRetentionMinutes;</span>
    }

    public void setLogRetentionMinutes(Long retentionMinutes) {
<span class="fc" id="L74">        this.logRetentionMinutes = retentionMinutes;</span>
<span class="fc" id="L75">    }</span>
    
    public Long[] getRetryIntervals() {
<span class="fc" id="L78">        return retryIntervals;</span>
    }

    public void setRetryIntervals(Long[] retryIntervals) {
<span class="fc" id="L82">        this.retryIntervals = retryIntervals;</span>
<span class="fc" id="L83">    }</span>
    
    public String getFailedImportLogDir() {
<span class="fc" id="L86">        return failedImportLogDir;</span>
    }

    public void setFailedImportLogDir(String failedImportLogDir) {
<span class="fc" id="L90">        this.failedImportLogDir = failedImportLogDir;</span>
<span class="fc" id="L91">    }</span>
    
    public Long getKeepAliveInterval() {
<span class="fc" id="L94">        return keepAliveInterval;</span>
    }

    public void setKeepAliveInterval(Long keepAliveInterval) {
<span class="fc" id="L98">        this.keepAliveInterval = keepAliveInterval;</span>
<span class="fc" id="L99">    }</span>
    
    @Override
    public int hashCode() {
<span class="nc" id="L103">        return toString().hashCode();</span>
    }
    
    @Override
    public boolean equals(Object other) {
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">        if (this == other) {</span>
<span class="nc" id="L109">            return true;</span>
        }
<span class="pc bpc" id="L111" title="1 of 2 branches missed.">        if (other instanceof ImportConfig) {</span>
<span class="fc" id="L112">            return Objects.equals(other.toString(), this.toString());</span>
        }
<span class="nc" id="L114">        return false;</span>
    }
    
    @Override
    public String toString() {
<span class="fc" id="L119">        String xs = Arrays.toString(retryIntervals);</span>
<span class="fc" id="L120">        return String.format(&quot;%s | %s | %s | %s | %s&quot;,</span>
<span class="fc" id="L121">                importLogDir, failedImportLogDir, logRetentionMinutes, </span>
<span class="fc" id="L122">                keepAliveInterval, xs);</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>Smuggler All Tests (Mar 29, 2016 9:20:39 AM)</div></body></html>